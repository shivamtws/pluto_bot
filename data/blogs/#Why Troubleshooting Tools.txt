Why Troubleshooting Tools are Important to Any Citrix Upgrade By Citrix CTP George Spiers  

The Extended Support end-date for XenApp 6.5 is just under two months away, so the remaining customers, which I expect to be a fair few, should be on their migration journey to the Flexcast Management Architecture versions of Citrix Virtual Apps and Desktops 7. We should take a moment to firstly identify the different types of customers and where they are on their Citrix Virtual Apps and Desktops journey. I like to group them in to three categories:   The XenApp 6.5 Customers: The XenApp 6.5 customers that remain on that version for reasons such as:

It just works, and the customer has been reluctant to move to Virtual Apps and Desktops 7 in case it did not perform as well. Missing features available in XenApp 6.5 but not available in Virtual Apps and Desktops 7. Thankfully Citrix has filled the gap in this regard, not to mention the many more features now in Virtual Apps and Desktops 7. Having to retrain staff on the Flexcast Management Architecture is a challenge and has delayed the transition to Virtual Apps and Desktops 7. The components that make up a Virtual Apps and Desktops 7 site do behave different, but many components have not changed a great deal from 6.5. Budget constraints, as to support a new upgrade version, there is normally a requirement to invest in new virtualisation hardware, storage, and software licenses such as for new Operating Systems. Concerns around how IT support can affectively troubleshoot in a Virtual Apps and Desktops 7 environment, as there has been change in the architecture and components.

The 7.x Long Term Service Release (LTSR) Customers: The 7.x Long Term Service Release customers that remain on such a version for reasons such as:

The customer does not have the staff numbers or time to keep upgrading to the latest versions of Virtual Apps and Desktops. The customer does not want to risk the disruptions that an upgrade has the potential to bring, such as new types of faults leaking into the environment, slower performing logons, or a worsened in-session user experience. The customer wants to remain on a stable version and not risk introducing new code to the environment that could be unstable. The customer has no interest in new features at this time, and the current LTSR version offers all that they need.

The 7.x Current Release (CR) Customers: The Virtual Apps and Desktops 7 Current Release customers remain on such a version for reasons such as:

The customer needs the latest features released by Citrix, as it allows the customer to be more competitive in their market. The customer has a well-defined upgrade strategy that minimises user disruption and can be executed easily. The customer has the staff skilled to perform frequent upgrades and they are well equipped with tools such as monitoring products to capture analytics and troubleshoot the environment effectively.

Either way, if a customer is still on XenApp 6.5, LTSR or the Current Release of Virtual Apps and Desktops, at some time sooner or later the environment will need to be upgraded. Stepping aside from Citrix upgrades and looking outside of the Citrix stack allows us to remember that every other component used to support your application or desktop virtualisation deployment will need to be maintained and not left stagnant. That is, from your bare metal hypervisor hosts, to the network and storage fabrics, Operating Systems, SQL server versions, and the applications that users’ interface with every day. The problem the IT team and organisation face is that with upgrades to any infrastructure hardware or software component, it can result in a degraded end-user experience, or it could introduce new types of faults into your environment. This is where monitoring software can aid your deployments and help ease those deployment pains. Investment in purpose-built troubleshooting and monitoring tools helps with deployment pains: A monitoring solution is just what you need to aid your upgrades from XenApp 6.5 to 7, or from Virtual Apps and Desktops 7 versions to later releases. Here are three key benefits you can gain from having a monitoring solution in place: Baseline the environment before and after upgrades. Baselining allows you to compare the performance of your infrastructure when it is working as it should, and then after you complete an upgrade to a newer version of Virtual Apps and Desktops. You can also extend the baselining to hardware refreshes, Operating System upgrades, 3rd party software upgrades and more. This allows you to determine if any change to the environment has had an impact on performance. Baselines should be focused to include logon times, application launch times, virtual machine resource consumption, and resource consumption against your hypervisors, storage and network. Monitor both old and future environments from a single pane of glass. During a Virtual Apps and Desktops upgrade, there is going to be a time where you will have users launching resources from both old and new environments. More typically in an enterprise environment will you stage the upgrade. This allows you to carefully plan and execute your upgrades, without putting too much pressure on your team and causing mass-disruption to end-users. With a monitoring product that is able to monitor both environments at the same time, you will have the advantage of being able to effectively monitor and troubleshoot both environments from a single console, as let’s face it, the priority of the old environment should not decrease until the last user has been migrated off it. Troubleshoot any issues that do crop up after the migration quickly, to avoid end-user disappointment. Your end users are the key to a successful deployment. If your end-users frequently experience issues during or just after the deployment of a new version of Citrix Virtual Apps and Desktops, management may delay Leverage historical reports to continually monitor and trend use and performance over time. To anticipate and prevent future issues, it is critical to trend and watch performance over time so that you can foster data driven conversations on how and where you can make future performance improvements and ensure performance degradation does not slowly happen over time. Goliath Performance Monitor (GPM): The three key benefits I spoke about can be delivered by a monitoring and troubleshooting solution such as Goliath Performance Monitor, and the Application Availability Monitor products. Application Availability Monitor (GAAM) is a synthetic application availability tool that can simulate the launching of applications or desktops in your Virtual Apps and Desktops environments, mimicking a real user session launch. Simulations are automatically performed at set times chosen by you, and simulations launch a resource just like an end-user would. This synthetic logon process tests StoreFront logins, authentication, application enumeration, session launch, and more, including capturing the time it takes for each step to complete.

These steps play a direct part in the success of a Virtual Apps and Desktops upgrade. If they are much slower after an upgrade than they previously were, delays to the upgrade may be inevitable as user feedback would be poor and adoption is likely to be low. Having a tool like GAAM running in your current environment allows you to capture a baseline for many of the workflows an end user goes through every day, and you can compare that baseline with an upgraded version of Citrix Virtual Apps and Desktops. This is further achieved by the historical reporting capabilities of the product. The results of GAAM are fed into the Goliath Performance Monitor system and can be used for historical reporting as mentioned. This system monitors your Citrix components such as the Delivery Controllers, VDAs, and StoreFront servers. It can also monitor multiple versions, solving the key benefit of monitoring your XenApp 6.5 environment and Virtual Apps and Desktops 7 environment at the same time. However, it also goes beyond just Citrix. GPM can monitor your hypervisor hosts, the virtual machines that run within them, your storage platform, the networking stack, and end-user specific experiences such as real user logon times, in-session performance and more. This allows you to even benchmark hypervisor performance before and after a hardware refresh, or virtual machine resource consumption after an Operating System upgrade.

Above is a screenshot of the summary information composing the user experience dashboard that provides information and metrics about the user’s specific published app/desktop or virtual desktop session making it easier to troubleshoot when issues arise.

Going beyond benchmarking for upgrades, the capturing and archiving of all this data can assist with your capacity planning for future upgrades without the need to guess. Whilst on a normal day the solution keeps check on your infrastructure, the early warning system provided by Goliath Performance Monitor makes sure that you are alerted to problems before an end-user experiences them, or the problems become more widespread within the business affecting multiple users. This delivers the third key benefit of solving issues before an end-user notices and tickets are opened with the helpdesk. There is also the capability of self-healing, allowing problems to automatically be remediated without manual intervention from the IT administrators. Summary: Software vendors such as Citrix are innovating at a rapid pace, bringing new versions of their products out every quarter. This speed of release means that customers will find themselves upgrading more frequently than they ever did before, which is often warranted to make use of new functionality and stay current, however it does bring a risk to the end-user using the platform you are upgrading that they may not get the same user experience they have become used to expecting. That experience can be calculated by performance or by hard or soft errors encountered. With a monitoring tool like GPM, you get a wrath of information about a user’s session experience when they are connected to a virtual application or desktop. That information is saved and available for historical reporting. GPM also provides information about your virtual machine’s performance, the network performance, and hypervisor performance. You can see things like how much CPU is being consumed on a hypervisor host or what process in a virtual desktop is taking up too much memory. If an IT administrator takes a call from an affected user, direct from the GPM console you can see the client’s IP address, logon time, Citrix Receiver version, what time they connected, their session latency and so much more. Having information like this readily available and at your fingertips empowers the IT service desk and results in support incidents being resolved faster. All of these capabilities will undoubtably help you during those upgrades that will happen sooner rather than later. They will also continue to help once the upgrade is successful, ensuring that you not only deliver a performing solution from the beginning, but during the full life of the environment. Whether you’re still in the planning stages or in the middle of a phased roll-out, here is a free migration guide, written for IT professionals by IT professionals that will give you all the technical details you need to ensure a seamless migration and a positive end-user experience.
